<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Meteoroloģiskās stacijas</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://api.mapbox.com/mapbox-gl-js/v2.8.1/mapbox-gl.js"></script>
  <link href="https://api.mapbox.com/mapbox-gl-js/v2.8.1/mapbox-gl.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
  <style>
    body {
      margin: 0;
      padding: 0;
    }

    #map {
      position: absolute;
      top: 0;
      bottom: 0;
      width: 100%;
    }

    .marker-info {
      font-size: 16px;
      font-weight: 700;
      font-family: Arial, Helvetica, sans-serif;
      background-color: white;
      padding: 10px;
      border-radius: 5px;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
    }

    .marker-info p {
      margin: 0;
    }

    .marker-info i {
      margin-right: 5px;
    }

    .icon {
      margin-right: 5px;
    }

    .controls {
      position: absolute;
      top: 10px;
      left: 10px;
      z-index: 2;
      background-color: white;
      padding: 10px;
      border-radius: 5px;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
    }
  </style>
</head>

<body>

  <div id="map"></div>

  <!-- Controls for toggling markers -->
  <div class="controls">
    <h3>Parametri</h3>
    <label>
      <input type="checkbox" id="temperatureCheckbox"> Temperatūra
    </label>
    <br>
    <label>
      <input type="checkbox" id="windDirectionCheckbox"> Vēja virziens
    </label>
    <br>
    <label>
      <input type="checkbox" id="averageWindSpeedCheckbox"> Vēja ātrums
    </label>
    <br>
    <label>
      <input type="checkbox" id="windGustCheckbox"> Vēja brāzmas
    </label>
    <br>
    <label>
      <input type="checkbox" id="relativeHumidityCheckbox"> Relatīvais mitrums
    </label>
    <br>
    <label>
      <input type="checkbox" id="atmosphericPressureCheckbox"> Atmosfēras spiediens
    </label>
    <br>
    <label>
      <input type="checkbox" id="precipitationCheckbox"> Nokrišņu daudzums
    </label>
    <br>
    <label>
      <input type="checkbox" id="visibilityCheckbox"> Redzamība
    </label>
    <br>
    <label>
      <input type="checkbox" id="snowDepthCheckbox"> Sniega segas biezums
    </label>
    <br>
    <label>
      <input type="checkbox" id="uvIndexCheckbox"> UV indekss
    </label>
  </div>

  <script>
    mapboxgl.accessToken = 'pk.eyJ1IjoibWV0ZW9sYXR2aWEiLCJhIjoiY2xjcWF3ajRkMDQ0NDNucDE4aTdkZ3h2NSJ9.L0yigObs_66n45KR3oLfUQ';










    // Fetch JSON data from the provided URLs
    const weatherMonitoringPointsUrl = 'https://videscentrs.lvgmc.lv/data/weather_monitoring_points';
    const weatherMonitoringDataUrl = 'https://videscentrs.lvgmc.lv/data/weather_monitoring_data_raw';

    Promise.all([
      fetch(weatherMonitoringPointsUrl).then(response => response.json()),
      fetch(weatherMonitoringDataUrl).then(response => response.json())
    ]).then(([weatherPoints, weatherData]) => {










      // Create a new Mapbox map
      var map = new mapboxgl.Map({
        container: 'map',
        projection: 'mercator',
        style: 'mapbox://styles/mapbox/dark-v11',
        center: [24.55, 56.85],
        zoom: 6.5
      });










      // Add DEM
      map.on('style.load', () => {
        map.addSource('mapbox-dem', {
          'type': 'raster-dem',
          'url': 'mapbox://mapbox.mapbox-terrain-dem-v1',
          'tileSize': 512,
          'maxzoom': 14
        });
        map.setTerrain({ 'source': 'mapbox-dem', 'exaggeration': 2.0 });
      });










      // Add navigation control
      map.addControl(new mapboxgl.NavigationControl());










      // Add fullscreen control
      map.addControl(new mapboxgl.FullscreenControl({ container: document.querySelector('body') }));










      // Add geolocate control
      map.addControl(new mapboxgl.GeolocateControl({
        positionOptions: {
          enableHighAccuracy: true
        },
        trackUserLocation: true,
        showUserHeading: true
      }));










      // Create arrays to store markers for each parameter
      const temperatureMarkers = [];
      const windDirectionMarkers = [];
      const averageWindSpeedMarkers = [];
      const windGustMarkers = [];
      const relativeHumidityMarkers = [];
      const atmosphericPressureMarkers = [];
      const precipitationMarkers = [];
      const visibilityMarkers = [];
      const snowDepthMarkers = [];
      const uvIndexMarkers = [];










      // Merge weather station data with weather data
      const mergedData = weatherPoints.map(station => {
        const weatherDataForStation = weatherData.find(data => data.stacijas_kods === station.kods);
        return { ...station, ...weatherDataForStation };
      });










      // Function to create markers for each parameter
      function createMarkers() {
        console.log('Creating markers...'); // Add this line
        mergedData.forEach(station => {
          // Temperature Marker
          if (station.temperatura) {
            const temperature = station.temperatura || 'N/A';
            const temperatureMarkerElement = createMarkerElement('Temperature', temperature);
            const temperatureMarker = createMarker(temperatureMarkerElement, station.lon, station.lat);
            temperatureMarkers.push(temperatureMarker);
          }

          // Wind Direction Marker
          if (station.veja_virziens) {
            const windDirection = station.veja_virziens || 'N/A';
            const windDirectionMarkerElement = createMarkerElement('Wind Direction', windDirection);
            const windDirectionMarker = createMarker(windDirectionMarkerElement, station.lon, station.lat);
            windDirectionMarkers.push(windDirectionMarker);
          }

          // Average Wind Speed Marker
          if (station.videja_veja_atrums) {
            const averageWindSpeed = station.videja_veja_atrums || 'N/A';
            const averageWindSpeedMarkerElement = createMarkerElement('Wind Speed', averageWindSpeed); // Update the parameter name
            const averageWindSpeedMarker = createMarker(averageWindSpeedMarkerElement, station.lon, station.lat);
            averageWindSpeedMarkers.push(averageWindSpeedMarker);
          }

          // Wind Gust Marker
          if (station.veja_brazmas) {
            const windGust = station.veja_brazmas || 'N/A';
            const windGustMarkerElement = createMarkerElement('Wind Gust', windGust);
            const windGustMarker = createMarker(windGustMarkerElement, station.lon, station.lat);
            windGustMarkers.push(windGustMarker);
          }

          // Relative Humidity Marker
          if (station.relativais_mitrums) {
            const relativeHumidity = station.relativais_mitrums || 'N/A';
            const relativeHumidityMarkerElement = createMarkerElement('Relative Humidity', relativeHumidity);
            const relativeHumidityMarker = createMarker(relativeHumidityMarkerElement, station.lon, station.lat);
            relativeHumidityMarkers.push(relativeHumidityMarker);
          }

          // Atmospheric Pressure Marker
          if (station.atmosferas_spiediens) {
            const atmosphericPressure = station.atmosferas_spiediens || 'N/A';
            const atmosphericPressureMarkerElement = createMarkerElement('Atmospheric Pressure', atmosphericPressure);
            const atmosphericPressureMarker = createMarker(atmosphericPressureMarkerElement, station.lon, station.lat);
            atmosphericPressureMarkers.push(atmosphericPressureMarker);
          }

          // Precipitation Marker
          if (station.nokrisnu_daudzums) {
            const precipitation = station.nokrisnu_daudzums || 'N/A';
            const precipitationMarkerElement = createMarkerElement('Precipitation', precipitation);
            const precipitationMarker = createMarker(precipitationMarkerElement, station.lon, station.lat);
            precipitationMarkers.push(precipitationMarker);
          }

          // Visibility Marker
          if (station.redzamiba) {
            const visibility = station.redzamiba || 'N/A';
            const visibilityMarkerElement = createMarkerElement('Visibility', visibility);
            const visibilityMarker = createMarker(visibilityMarkerElement, station.lon, station.lat);
            visibilityMarkers.push(visibilityMarker);
          }

          // Snow Depth Marker
          if (station.sniega_segas_biezums) {
            const snowDepth = station.sniega_segas_biezums || 'N/A';
            const snowDepthMarkerElement = createMarkerElement('Snow Depth', snowDepth);
            const snowDepthMarker = createMarker(snowDepthMarkerElement, station.lon, station.lat);
            snowDepthMarkers.push(snowDepthMarker);
          }

          // UV Index Marker
          if (station.uvi !== null) {
            const uvIndex = station.uvi || 'N/A';
            const uvIndexMarkerElement = createMarkerElement('UV Index', uvIndex);
            const uvIndexMarker = createMarker(uvIndexMarkerElement, station.lon, station.lat);
            uvIndexMarkers.push(uvIndexMarker);
          }
        });
      }










      // Call createMarkers to create markers but don't add them initially
      createMarkers();










      // Toggle marker visibility based on checkbox state
      var temperatureCheckbox = document.getElementById('temperatureCheckbox');
      temperatureCheckbox.addEventListener('change', function () {
        toggleMarkers(temperatureMarkers, temperatureCheckbox.checked);
      });

      var windDirectionCheckbox = document.getElementById('windDirectionCheckbox');
      windDirectionCheckbox.addEventListener('change', function () {
        toggleMarkers(windDirectionMarkers, windDirectionCheckbox.checked);
      });

      var averageWindSpeedCheckbox = document.getElementById('averageWindSpeedCheckbox');
      averageWindSpeedCheckbox.addEventListener('change', function () {
        toggleMarkers(averageWindSpeedMarkers, averageWindSpeedCheckbox.checked);
      });

      var windGustCheckbox = document.getElementById('windGustCheckbox');
      windGustCheckbox.addEventListener('change', function () {
        toggleMarkers(windGustMarkers, windGustCheckbox.checked);
      });

      var relativeHumidityCheckbox = document.getElementById('relativeHumidityCheckbox');
      relativeHumidityCheckbox.addEventListener('change', function () {
        toggleMarkers(relativeHumidityMarkers, relativeHumidityCheckbox.checked);
      });

      var atmosphericPressureCheckbox = document.getElementById('atmosphericPressureCheckbox');
      atmosphericPressureCheckbox.addEventListener('change', function () {
        toggleMarkers(atmosphericPressureMarkers, atmosphericPressureCheckbox.checked);
      });

      var precipitationCheckbox = document.getElementById('precipitationCheckbox');
      precipitationCheckbox.addEventListener('change', function () {
        toggleMarkers(precipitationMarkers, precipitationCheckbox.checked);
      });

      var visibilityCheckbox = document.getElementById('visibilityCheckbox');
      visibilityCheckbox.addEventListener('change', function () {
        toggleMarkers(visibilityMarkers, visibilityCheckbox.checked);
      });

      var snowDepthCheckbox = document.getElementById('snowDepthCheckbox');
      snowDepthCheckbox.addEventListener('change', function () {
        toggleMarkers(snowDepthMarkers, snowDepthCheckbox.checked);
      });

      var uvIndexCheckbox = document.getElementById('uvIndexCheckbox');
      uvIndexCheckbox.addEventListener('change', function () {
        toggleMarkers(uvIndexMarkers, uvIndexCheckbox.checked);
      });










      // Function to toggle marker visibility
      function toggleMarkers(markers, visible) {
        markers.forEach(marker => {
          if (visible) {
            marker.addTo(map);
          } else {
            marker.remove();
          }
        });
      }










      // Function to create marker element
      function createMarkerElement(parameter, value) {
        const markerElement = document.createElement('div');
        markerElement.className = 'marker-info';










        // Define suffix based on parameter
        let suffix = '';
        if (parameter === 'Temperature') {
          suffix = '°C';
        } else if (parameter === 'Wind Speed' || parameter === 'Wind Gust') {
          suffix = ' m/s';
        } else if (parameter === 'Relative Humidity') {
          suffix = '%';
        } else if (parameter === 'Atmospheric Pressure') {
          suffix = ' hPa';
        } else if (parameter === 'Precipitation') {
          suffix = ' mm/h';
        } else if (parameter === 'Visibility') {
          suffix = ' m';
        } else if (parameter === 'Snow Depth') {
          suffix = ' cm';
        } else if (parameter === 'UV Index') {
          suffix = '°';
        }

        markerElement.innerHTML = `${value}${suffix}</p>`;










        // Set background color based on parameter
        if (parameter === 'Temperature') {
          const temperatureColor = getTemperatureColor(value);
          markerElement.style.backgroundColor = temperatureColor;
        } else if (parameter === 'Wind Speed') {
          const windSpeedColor = getWindSpeedColor(value);
          markerElement.style.backgroundColor = windSpeedColor;
        } else if (parameter === 'Wind Gust') {
          const windGustColor = getWindGustColor(value);
          markerElement.style.backgroundColor = windGustColor;
        } else if (parameter === 'Relative Humidity') {
          const relativeHumidityColor = getRelativeHumidityColor(value);
          markerElement.style.backgroundColor = relativeHumidityColor;
        } else if (parameter === 'Atmospheric Pressure') {
          const atmosphericPressureColor = getAtmosphericPressureColor(value);
          markerElement.style.backgroundColor = atmosphericPressureColor;
        } else if (parameter === 'Precipitation') { // Add this condition
          const precipitationColor = getPrecipitationColor(value);
          markerElement.style.backgroundColor = precipitationColor;
        } else if (parameter === 'Snow Depth') { // Add this condition
          const snowDepthColor = getSnowDepthColor(value);
          markerElement.style.backgroundColor = snowDepthColor;
        } else if (parameter === 'UV index') { // Add this condition
          const uvIndexColors = getuvIndexColors(value);
          markerElement.style.backgroundColor = uvIndexColors;
        }


        return markerElement;
      }










      // Function to create marker
      function createMarker(element, lon, lat) {
        return new mapboxgl.Marker({ element: element }).setLngLat([parseFloat(lon), parseFloat(lat)]);
      }










      // Function to get temperature color
      function getTemperatureColor(temperature) {
        // Your color values for temperature ranges
        const temperatureColors = [
          "rgb(255,255,255)",
          "rgb(255,245,255)",
          "rgb(255,230,255)",
          "rgb(255,220,255)",
          "rgb(255,205,255)",
          "rgb(255,190,255)",
          "rgb(255,175,255)",
          "rgb(255,160,255)",
          "rgb(255,145,255)",
          "rgb(255,135,255)",
          "rgb(255,120,255)",
          "rgb(255,110,255)",
          "rgb(255,100,255)",
          "rgb(255,90,255)",
          "rgb(255,80,255)",
          "rgb(255,70,255)",
          "rgb(255,60,255)",
          "rgb(255,50,255)",
          "rgb(255,35,255)",
          "rgb(255,15,255)",
          "rgb(255,0,255)",
          "rgb(240,0,240)",
          "rgb(230,0,230)",
          "rgb(220,0,220)",
          "rgb(200,0,200)",
          "rgb(190,0,180)",
          "rgb(175,0,165)",
          "rgb(160,0,150)",
          "rgb(145,0,140)",
          "rgb(135,0,130)",
          "rgb(115,0,125)",
          "rgb(90,0,115)",
          "rgb(65,0,115)",
          "rgb(35,0,115)",
          "rgb(10,0,120)",
          "rgb(0,0,128)",
          "rgb(0,0,160)",
          "rgb(0,0,190)",
          "rgb(0,0,225)",
          "rgb(0,0,255)",
          "rgb(0,35,255)",
          "rgb(0,65,255)",
          "rgb(0,85,255)",
          "rgb(0,110,255)",
          "rgb(0,128,255)",
          "rgb(0,145,255)",
          "rgb(0,170,255)",
          "rgb(0,195,255)",
          "rgb(0,215,255)",
          "rgb(0,230,255)",
          "rgb(0,255,255)",
          "rgb(0,255,128)",
          "rgb(0,255,95)",
          "rgb(0,255,70)",
          "rgb(0,255,40)",
          "rgb(0,255,0)",
          "rgb(70,255,0)",
          "rgb(110,255,0)",
          "rgb(140,255,0)",
          "rgb(165,255,0)",
          "rgb(185,255,0)",
          "rgb(205,255,0)",
          "rgb(220,255,0)",
          "rgb(235,255,0)",
          "rgb(255,255,0)",
          "rgb(255,240,0)",
          "rgb(255,220,0)",
          "rgb(255,195,0)",
          "rgb(255,165,0)",
          "rgb(255,140,0)",
          "rgb(255,120,0)",
          "rgb(255,100,0)",
          "rgb(255,80,0)",
          "rgb(255,60,0)",
          "rgb(255,30,0)",
          "rgb(255,0,0)",
          "rgb(245,0,0)",
          "rgb(235,0,0)",
          "rgb(220,0,0)",
          "rgb(205,0,0)",
          "rgb(195,0,0)",
          "rgb(180,0,0)",
          "rgb(165,0,0)",
          "rgb(150,0,0)",
          "rgb(135,0,0)",
          "rgb(120,0,0)",
          "rgb(110,0,0)",
          "rgb(100,0,0)",
          "rgb(90,0,0)",
          "rgb(75,0,0)",
          "rgb(60,0,0)",
          "rgb(60,20,20)",
          "rgb(60,40,40)",
          "rgb(60,60,60)",
          "rgb(80,80,80)",
          "rgb(100,100,100)",
          "rgb(120,120,120)",
          "rgb(140,140,140)",
          "rgb(160,160,160)",
          "rgb(180,180,180)",
        ];

        // Adjust the temperature range and step based on your requirements
        const minTemperature = -50;
        const maxTemperature = 50;
        const temperatureStep = 1;

        // Convert temperature to a valid index for the color array
        const index = Math.min(
          Math.max(Math.round((temperature - minTemperature) / temperatureStep), 0),
          temperatureColors.length - 1
        );

        return temperatureColors[index];
      }










      // Function to get wind speed color
      function getWindSpeedColor(windSpeed) {
        // Your color values for wind speed ranges
        const windSpeedColors = [
          "rgb(0,220,255)",
          "rgb(0,220,255)",
          "rgb(0,185,255)",
          "rgb(0,150,255)",
          "rgb(0,115,255)",
          "rgb(0,90,255)",
          "rgb(0,70,255)",
          "rgb(0,45,255)",
          "rgb(0,25,255)",
          "rgb(0,0,255)",
          "rgb(15,0,255)",
          "rgb(45,0,255)",
          "rgb(65,0,255)",
          "rgb(90,0,255)",
          "rgb(110,0,255)",
          "rgb(135,0,255)",
          "rgb(165,0,255)",
          "rgb(190,0,255)",
          "rgb(210,0,255)",
          "rgb(225,0,255)",
          "rgb(240,0,255)",
          "rgb(250,0,255)",
          "rgb(255,0,255)",
          "rgb(255,0,245)",
          "rgb(255,0,225)",
          "rgb(255,0,210)",
          "rgb(255,0,190)",
          "rgb(255,0,165)",
          "rgb(255,0,140)",
          "rgb(255,0,110)",
          "rgb(255,0,90)",
          "rgb(255,0,70)",
          "rgb(255,0,40)",
          "rgb(255,0,20)",
          "rgb(255,0,0)",
          "rgb(240,0,0)",
          "rgb(225,0,0)",
          "rgb(200,0,0)",
          "rgb(185,0,0)",
          "rgb(160,0,0)",
          "rgb(130,0,0)",
          "rgb(100,0,0)",
          "rgb(100,15,15)",
          "rgb(95,35,30)",
          "rgb(95,65,60)",
          "rgb(100,90,90)",
          "rgb(115,115,115)",
          "rgb(140,140,140)",
          "rgb(180,180,180)",
          "rgb(200,200,200)",
          "rgb(220,220,220)",
        ];

        // Adjust the wind speed range and step based on your requirements
        const minWindSpeed = 0;
        const maxWindSpeed = 50;
        const windSpeedStep = 1;

        // Convert wind speed to a valid index for the color array
        const index = Math.min(
          Math.max(Math.round((windSpeed - minWindSpeed) / windSpeedStep), 0),
          windSpeedColors.length - 1
        );

        return windSpeedColors[index];
      }










      // Function to get wind gust color
      function getWindGustColor(windGust) {
        // Your color values for wind gust ranges
        const windGustColors = [
          "rgb(0,220,255)",
          "rgb(0,220,255)",
          "rgb(0,185,255)",
          "rgb(0,150,255)",
          "rgb(0,115,255)",
          "rgb(0,90,255)",
          "rgb(0,70,255)",
          "rgb(0,45,255)",
          "rgb(0,25,255)",
          "rgb(0,0,255)",
          "rgb(15,0,255)",
          "rgb(45,0,255)",
          "rgb(65,0,255)",
          "rgb(90,0,255)",
          "rgb(110,0,255)",
          "rgb(135,0,255)",
          "rgb(165,0,255)",
          "rgb(190,0,255)",
          "rgb(210,0,255)",
          "rgb(225,0,255)",
          "rgb(240,0,255)",
          "rgb(250,0,255)",
          "rgb(255,0,255)",
          "rgb(255,0,245)",
          "rgb(255,0,225)",
          "rgb(255,0,210)",
          "rgb(255,0,190)",
          "rgb(255,0,165)",
          "rgb(255,0,140)",
          "rgb(255,0,110)",
          "rgb(255,0,90)",
          "rgb(255,0,70)",
          "rgb(255,0,40)",
          "rgb(255,0,20)",
          "rgb(255,0,0)",
          "rgb(240,0,0)",
          "rgb(225,0,0)",
          "rgb(200,0,0)",
          "rgb(185,0,0)",
          "rgb(160,0,0)",
          "rgb(130,0,0)",
          "rgb(100,0,0)",
          "rgb(100,15,15)",
          "rgb(95,35,30)",
          "rgb(95,65,60)",
          "rgb(100,90,90)",
          "rgb(115,115,115)",
          "rgb(140,140,140)",
          "rgb(180,180,180)",
          "rgb(200,200,200)",
          "rgb(220,220,220)",
        ];

        // Adjust the wind gust range and step based on your requirements
        const minWindGust = 0;
        const maxWindGust = 50;
        const windGustStep = 1;

        // Convert wind gust to a valid index for the color array
        const index = Math.min(
          Math.max(Math.round((windGust - minWindGust) / windGustStep), 0),
          windGustColors.length - 1
        );

        return windGustColors[index];
      }










      // Function to get relative humidity color
      function getRelativeHumidityColor(relativeHumidity) {
        // Your color values for relative humidity ranges
        const relativeHumidityColors = [
          "rgb(250,255,255)",
          "rgb(225,255,255)",
          "rgb(200,255,255)",
          "rgb(180,255,255)",
          "rgb(160,255,255)",
          "rgb(140,255,255)",
          "rgb(120,255,255)",
          "rgb(100,255,255)",
          "rgb(80,255,255)",
          "rgb(60,255,255)",
          "rgb(40,255,255)",
          "rgb(15,255,255)",
          "rgb(0,255,255)",
          "rgb(0,240,255)",
          "rgb(0,215,255)",
          "rgb(0,190,255)",
          "rgb(0,170,255)",
          "rgb(0,150,255)",
          "rgb(0,130,255)",
          "rgb(0,110,255)",
          "rgb(0,90,255)",
          "rgb(0,70,255)",
          "rgb(0,50,255)",
          "rgb(0,25,255)",
          "rgb(0,0,255)",
          "rgb(0,0,225)",
        ];

        // Adjust the relative humidity range and step based on your requirements
        const minRelativeHumidity = 0;
        const maxRelativeHumidity = 100;
        const relativeHumidityStep = 5;

        // Convert relative humidity to a valid index for the color array
        const index = Math.min(
          Math.max(Math.round((relativeHumidity - minRelativeHumidity) / relativeHumidityStep), 0),
          relativeHumidityColors.length - 1
        );

        return relativeHumidityColors[index];
      }










      // Function to get atmospheric pressure color
      function getAtmosphericPressureColor(atmosphericPressure) {
        // Your color values for atmospheric pressure ranges
        const atmosphericPressureColors = [
          "rgb(255,127,255)",
          "rgb(255,108,255)",
          "rgb(255,95,255)",
          "rgb(255,81,255)",
          "rgb(255,71,255)",
          "rgb(255,60,255)",
          "rgb(255,43,255)",
          "rgb(255,25,255)",
          "rgb(251,0,251)",
          "rgb(243,0,243)",
          "rgb(238,0,238)",
          "rgb(228,0,228)",
          "rgb(217,0,217)",
          "rgb(203,0,203)",
          "rgb(188,0,188)",
          "rgb(178,0,177)",
          "rgb(168,0,172)",
          "rgb(161,0,171)",
          "rgb(155,0,175)",
          "rgb(147,0,175)",
          "rgb(137,0,175)",
          "rgb(126,0,175)",
          "rgb(111,0,175)",
          "rgb(96,0,175)",
          "rgb(82,0,175)",
          "rgb(68,0,175)",
          "rgb(57,0,175)",
          "rgb(48,0,174)",
          "rgb(31,0,173)",
          "rgb(17,1,173)",
          "rgb(0,0,175)",
          "rgb(0,0,178)",
          "rgb(0,0,181)",
          "rgb(0,0,186)",
          "rgb(0,0,193)",
          "rgb(0,0,200)",
          "rgb(0,0,210)",
          "rgb(0,0,222)",
          "rgb(0,0,235)",
          "rgb(0,0,247)",
          "rgb(0,0,255)",
          "rgb(0,21,255)",
          "rgb(0,36,255)",
          "rgb(0,48,255)",
          "rgb(0,58,255)",
          "rgb(0,65,255)",
          "rgb(0,70,255)",
          "rgb(0,76,255)",
          "rgb(0,83,255)",
          "rgb(0,90,255)",
          "rgb(0,98,255)",
          "rgb(0,107,255)",
          "rgb(0,116,255)",
          "rgb(0,125,255)",
          "rgb(0,134,255)",
          "rgb(0,143,255)",
          "rgb(0,153,255)",
          "rgb(0,163,255)",
          "rgb(0,173,255)",
          "rgb(0,183,255)",
          "rgb(0,194,255)",
          "rgb(0,204,255)",
          "rgb(0,215,255)",
          "rgb(0,224,255)",
          "rgb(66,232,255)",
          "rgb(108,239,255)",
          "rgb(143,245,255)",
          "rgb(164,251,255)",
          "rgb(175,255,255)",
          "rgb(167,255,230)",
          "rgb(146,255,195)",
          "rgb(111,255,144)",
          "rgb(68,255,89)",
          "rgb(0,255,0)",
          "rgb(0,246,0)",
          "rgb(0,237,0)",
          "rgb(0,225,0)",
          "rgb(0,213,0)",
          "rgb(0,200,0)",
          "rgb(0,182,0)",
          "rgb(0,160,0)",
          "rgb(0,141,0)",
          "rgb(0,129,0)",
          "rgb(7,128,0)",
          "rgb(68,145,0)",
          "rgb(120,175,0)",
          "rgb(177,212,0)",
          "rgb(227,243,0)",
          "rgb(255,255,0)",
          "rgb(255,249,0)",
          "rgb(255,236,0)",
          "rgb(255,216,0)",
          "rgb(255,195,0)",
          "rgb(255,178,0)",
          "rgb(255,166,0)",
          "rgb(255,156,0)",
          "rgb(255,146,0)",
          "rgb(255,136,0)",
          "rgb(255,126,0)",
          "rgb(255,116,0)",
          "rgb(255,106,0)",
          "rgb(255,94,0)",
          "rgb(255,81,0)",
          "rgb(255,68,0)",
          "rgb(255,57,0)",
          "rgb(255,46,0)",
          "rgb(255,33,0)",
          "rgb(255,20,0)",
          "rgb(255,0,0)",
          "rgb(246,0,0)",
          "rgb(232,0,0)",
          "rgb(216,0,0)",
          "rgb(199,0,0)",
          "rgb(184,0,0)",
          "rgb(172,0,0)",
          "rgb(161,0,0)",
          "rgb(149,0,0)",
          "rgb(138,0,0)",
          "rgb(126,0,0)",
          "rgb(111,0,0)",
          "rgb(99,0,0)",
          "rgb(86,0,0)",
          "rgb(74,0,0)",
          "rgb(67,0,0)",
          "rgb(64,0,14)",
          "rgb(61,0,29)",
          "rgb(60,0,42)",
          "rgb(63,0,57)",
          "rgb(68,0,69)",
          "rgb(77,0,81)",
          "rgb(89,0,93)",
          "rgb(102,0,105)",
          "rgb(116,0,116)",
          "rgb(130,0,130)",
          "rgb(144,0,144)",
          "rgb(161,0,161)",
          "rgb(175,0,175)",
          "rgb(190,0,190)",
          "rgb(204,0,204)",
          "rgb(218,0,218)",
          "rgb(230,0,230)",
          "rgb(240,0,240)",
          "rgb(255,0,255)",
        ];

        // Adjust the atmospheric pressure range and step based on your requirements
        const minAtmosphericPressure = 931;
        const maxAtmosphericPressure = 1073;
        const atmosphericPressureStep = 1;

        // Convert atmospheric pressure to a valid index for the color array
        const index = Math.min(
          Math.max(Math.round((atmosphericPressure - minAtmosphericPressure) / atmosphericPressureStep), 0),
          atmosphericPressureColors.length - 1
        );

        return atmosphericPressureColors[index];
      }










      // Function to get precipitation color
      function getPrecipitationColor(precipitation) {
        // Your color values for precipitation ranges
        const precipitationColors = [
          "rgb(200,200,200)",
          "rgb(200,200,200)",
          "rgb(0,255,0)",
          "rgb(0,244,0)",
          "rgb(0,233,0)",
          "rgb(0,220,0)",
          "rgb(0,204,0)",
          "rgb(0,187,0)",
          "rgb(0,171,0)",
          "rgb(0,156,0)",
          "rgb(0,141,0)",
          "rgb(0,128,0)",
          "rgb(0,116,0)",
          "rgb(0,104,0)",
          "rgb(0,90,0)",
          "rgb(0,76,0)",
          "rgb(0,63,0)",
          "rgb(0,52,0)",
          "rgb(0,44,0)",
          "rgb(0,38,0)",
          "rgb(0,30,0)",
          "rgb(0,24,0)",
          "rgb(255,255,0)",
          "rgb(255,248,0)",
          "rgb(255,235,0)",
          "rgb(255,212,0)",
          "rgb(255,186,0)",
          "rgb(255,160,0)",
          "rgb(255,135,0)",
          "rgb(255,121,0)",
          "rgb(255,106,0)",
          "rgb(255,93,0)",
          "rgb(255,78,0)",
          "rgb(255,63,0)",
          "rgb(255,45,0)",
          "rgb(255,23,0)",
          "rgb(255,0,0)",
          "rgb(237,0,0)",
          "rgb(218,0,0)",
          "rgb(197,0,0)",
          "rgb(176,0,0)",
          "rgb(155,0,0)",
          "rgb(137,0,0)",
          "rgb(124,0,0)",
          "rgb(114,0,0)",
          "rgb(102,0,0)",
          "rgb(96,0,0)",
          "rgb(88,0,0)",
          "rgb(80,0,0)",
          "rgb(72,0,0)",
          "rgb(64,0,0)",
          "rgb(54,0,0)",
          "rgb(54,0,54)",
          "rgb(64,0,64)",
          "rgb(71,0,71)",
          "rgb(81,0,81)",
          "rgb(93,0,93)",
          "rgb(107,0,112)",
          "rgb(122,0,122)",
          "rgb(140,0,140)",
          "rgb(156,0,156)",
          "rgb(171,0,171)",
          "rgb(190,190,190)",
        ];

        // Adjust the precipitation range and step based on your requirements
        const minPrecipitation = 0.5;
        const maxPrecipitation = 30.0;
        const precipitationStep = 1.0;

        // Convert precipitation to a valid index for the color array
        const index = Math.min(
          Math.max(Math.round((precipitation - minPrecipitation) / precipitationStep), 0),
          precipitationColors.length - 1
        );

        return precipitationColors[index];
      }










      // Function to get snow depth color
      function getSnowDepthColor(snowDepth) {
        // Your color values for snow depth ranges
        const snowDepthColors = [
          "rgb(255,255,255)",
          "rgb(127,127,127)",
          "rgb(121,219,255)",
          "rgb(65,214,255)",
          "rgb(0,190,255)",
          "rgb(0,155,255)",
          "rgb(0,115,255)",
          "rgb(0,67,255)",
          "rgb(0,0,255)",
          "rgb(0,0,167)",
          "rgb(0,0,127)",
          "rgb(20,0,120)",
          "rgb(35,0,115)",
          "rgb(47,0,117)",
          "rgb(60,0,123)",
          "rgb(70,0,130)",
          "rgb(76,0,142)",
          "rgb(80,0,159)",
          "rgb(85,0,177)",
          "rgb(92,0,191)",
          "rgb(101,0,201)",
          "rgb(109,0,205)",
          "rgb(119,0,210)",
          "rgb(130,0,210)",
          "rgb(141,10,210)",
          "rgb(155,15,210)",
          "rgb(165,15,199)",
          "rgb(178,15,200)",
          "rgb(188,10,198)",
          "rgb(198,0,198)",
          "rgb(206,0,203)",
          "rgb(214,0,210)",
          "rgb(220,0,215)",
          "rgb(228,0,228)",
          "rgb(232,0,232)",
          "rgb(240,0,240)",
          "rgb(245,0,246)",
          "rgb(251,0,251)",
          "rgb(255,0,255)",
          "rgb(255,0,250)",
          "rgb(255,0,245)",
          "rgb(255,0,235)",
          "rgb(255,0,222)",
          "rgb(255,5,207)",
          "rgb(255,10,192)",
          "rgb(255,15,176)",
          "rgb(255,15,160)",
          "rgb(255,10,144)",
          "rgb(255,5,130)",
          "rgb(255,0,120)",
          "rgb(255,0,110)",
          "rgb(255,0,100)",
          "rgb(255,0,90)",
          "rgb(255,0,77)",
          "rgb(255,0,66)",
          "rgb(255,0,52)",
          "rgb(255,0,41)",
          "rgb(255,0,25)",
          "rgb(255,0,0)",
          "rgb(237,0,0)",
          "rgb(225,0,0)",
          "rgb(212,0,0)",
          "rgb(197,0,0)",
          "rgb(181,0,0)",
          "rgb(167,0,0)",
          "rgb(153,0,0)",
          "rgb(141,0,0)",
          "rgb(131,0,0)",
          "rgb(122,0,0)",
          "rgb(113,0,0)",
          "rgb(106,0,0)",
          "rgb(99,0,0)",
          "rgb(87,0,0)",
          "rgb(82,0,0)",
          "rgb(77,0,0)",
          "rgb(72,0,0)",
          "rgb(67,0,0)",
          "rgb(63,0,0)",
          "rgb(60,0,0)",
          "rgb(56,0,0)",
          "rgb(53,0,0)",
          "rgb(50,0,0)",
          "rgb(47,0,0)",
          "rgb(45,0,0)",
          "rgb(42,0,0)",
          "rgb(39,0,0)",
          "rgb(37,0,0)",
          "rgb(34,0,0)",
          "rgb(31,0,0)",
          "rgb(28,0,0)",
          "rgb(26,0,0)",
          "rgb(24,0,0)",
          "rgb(22,0,0)",
          "rgb(19,0,0)",
          "rgb(17,0,0)",
          "rgb(14,0,0)",
          "rgb(10,0,0)",
          "rgb(8,0,0)",
          "rgb(6,0,0)",
          "rgb(4,0,0)",
          "rgb(2,0,0)",
        ];

        // Adjust the snow depth range and step based on your requirements
        const minSnowDepth = 0;
        const maxSnowDepth = 100;
        const snowDepthStep = 1;

        // Convert snow depth to a valid index for the color array
        const index = Math.min(
          Math.max(Math.round((snowDepth - minSnowDepth) / snowDepthStep), 0),
          snowDepthColors.length - 1
        );

        return snowDepthColors[index];
      }










      // Function to get UV Index color
      function getUVIndexColor(uvIndex) {
        // Your color values for UV Index ranges
        const uvIndexColors = [
          "rgb(190,190,190)",
          "rgb(79,179,0)",
          "rgb(161,204,9)",
          "rgb(246,229,0)",
          "rgb(250,180,5)",
          "rgb(250,133,2)",
          "rgb(243,92,0)",
          "rgb(233,44,16)",
          "rgb(212,4,22)",
          "rgb(255,0,155)",
          "rgb(181,75,255)",
          "rgb(152,141,254)",
        ];

        return getColor(uvIndex, uvIndexColors);
      }


    }).catch(error => console.error('Error fetching data:', error));
  </script>

</body>

</html>